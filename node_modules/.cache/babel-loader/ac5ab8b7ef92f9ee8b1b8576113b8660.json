{"ast":null,"code":"var _jsxFileName = \"/home/aqua/Documents/Programming/mouseion-master/front-end/src/main-content.jsx\";\nimport { useState, useEffect, useRef } from 'react';\nimport firebase from 'firebase/app';\nimport 'firebase/firestore';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfirebase.initializeApp({\n  projectId: 'mouseion-tis-atmos'\n});\nconst firestore = firebase.firestore();\nexport default function () {\n  const [itemList, setItemList] = useState([]);\n  const [page, setPage] = useState(0);\n  const [loading, setLoading] = useState(true);\n  const loader = useRef();\n  let observer;\n  /*\n  useEffect(() => {\n    console.log('Element initialised')\n    const observer = new IntersectionObserver(async entities => {\n      for (let entity of entities) {\n        console.log('Loader seen.')\n        setPage(page + 1)\n      }\n    })\n    observer.observe(loader.current)\n    console.log(observer)\n  }, [])\n  */\n\n  useEffect(async () => {\n    console.log('Page changed ->', page);\n    console.log('--- Starting fake loading ---');\n    await new Promise((res, rej) => {\n      setTimeout(res, 2000);\n    }); //setItemList([...itemList, ...Array(100).fill().map((v, i) => (page * 100) + i)])\n\n    console.log('--- Fake loading finished ---');\n\n    if (observer == null) {\n      console.log('Observer not initialised');\n      observer = new IntersectionObserver(entities => {\n        console.log();\n      });\n    }\n  }, [page]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    class: \"bg-main py-12 md:py-20 text-white min-h-screen\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      class: \"mx-2 sm:mx-4 md:mx-8 lg:mx-16 xl:mx-30 2xl:mx-40\",\n      children: [itemList.map((v, i) => /*#__PURE__*/_jsxDEV(\"p\", {\n        class: \"text-xl\",\n        children: v\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 13\n      }, this)), loading ? /*#__PURE__*/_jsxDEV(\"p\", {\n        class: \"text-xl\",\n        ref: loader,\n        children: \"Loading ...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 20\n      }, this) : null]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 5\n  }, this);\n}","map":{"version":3,"sources":["/home/aqua/Documents/Programming/mouseion-master/front-end/src/main-content.jsx"],"names":["useState","useEffect","useRef","firebase","initializeApp","projectId","firestore","itemList","setItemList","page","setPage","loading","setLoading","loader","observer","console","log","Promise","res","rej","setTimeout","IntersectionObserver","entities","map","v","i"],"mappings":";AAAA,SAASA,QAAT,EAAmBC,SAAnB,EAA8BC,MAA9B,QAA4C,OAA5C;AAEA,OAAOC,QAAP,MAAqB,cAArB;AACA,OAAO,oBAAP;;AAEAA,QAAQ,CAACC,aAAT,CAAuB;AACrBC,EAAAA,SAAS,EAAE;AADU,CAAvB;AAIA,MAAMC,SAAS,GAAGH,QAAQ,CAACG,SAAT,EAAlB;AAEA,eAAe,YAAY;AACzB,QAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BR,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAM,CAACS,IAAD,EAAOC,OAAP,IAAkBV,QAAQ,CAAC,CAAD,CAAhC;AACA,QAAM,CAACW,OAAD,EAAUC,UAAV,IAAwBZ,QAAQ,CAAC,IAAD,CAAtC;AACA,QAAMa,MAAM,GAAGX,MAAM,EAArB;AACA,MAAIY,QAAJ;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEEb,EAAAA,SAAS,CAAC,YAAY;AACpBc,IAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA+BP,IAA/B;AACAM,IAAAA,OAAO,CAACC,GAAR,CAAY,+BAAZ;AACA,UAAM,IAAIC,OAAJ,CAAY,CAACC,GAAD,EAAMC,GAAN,KAAc;AAC9BC,MAAAA,UAAU,CAACF,GAAD,EAAM,IAAN,CAAV;AACD,KAFK,CAAN,CAHoB,CAMpB;;AACAH,IAAAA,OAAO,CAACC,GAAR,CAAY,+BAAZ;;AACA,QAAIF,QAAQ,IAAI,IAAhB,EAAsB;AACpBC,MAAAA,OAAO,CAACC,GAAR,CAAY,0BAAZ;AACAF,MAAAA,QAAQ,GAAG,IAAIO,oBAAJ,CAAyBC,QAAQ,IAAI;AAC9CP,QAAAA,OAAO,CAACC,GAAR;AACD,OAFU,CAAX;AAGD;AACF,GAdQ,EAcN,CAACP,IAAD,CAdM,CAAT;AAgBA,sBACE;AAAK,IAAA,KAAK,EAAC,gDAAX;AAAA,2BACE;AAAK,MAAA,KAAK,EAAC,kDAAX;AAAA,iBAEIF,QAAQ,CAACgB,GAAT,CAAa,CAACC,CAAD,EAAIC,CAAJ,kBACX;AAAG,QAAA,KAAK,EAAC,SAAT;AAAA,kBAA4BD;AAA5B,SAAwBC,CAAxB;AAAA;AAAA;AAAA;AAAA,cADF,CAFJ,EAMGd,OAAO,gBAAG;AAAG,QAAA,KAAK,EAAC,SAAT;AAAmB,QAAA,GAAG,EAAEE,MAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAAH,GAAqD,IAN/D;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,UADF;AAYD","sourcesContent":["import { useState, useEffect, useRef } from 'react'\n\nimport firebase from 'firebase/app'\nimport 'firebase/firestore'\n\nfirebase.initializeApp({\n  projectId: 'mouseion-tis-atmos'\n})\n\nconst firestore = firebase.firestore()\n\nexport default function () {\n  const [itemList, setItemList] = useState([])\n  const [page, setPage] = useState(0)\n  const [loading, setLoading] = useState(true)\n  const loader = useRef()\n  let observer\n\n  /*\n  useEffect(() => {\n    console.log('Element initialised')\n    const observer = new IntersectionObserver(async entities => {\n      for (let entity of entities) {\n        console.log('Loader seen.')\n        setPage(page + 1)\n      }\n    })\n    observer.observe(loader.current)\n    console.log(observer)\n  }, [])\n  */\n\n  useEffect(async () => {\n    console.log('Page changed ->', page)\n    console.log('--- Starting fake loading ---')\n    await new Promise((res, rej) => {\n      setTimeout(res, 2000)\n    })\n    //setItemList([...itemList, ...Array(100).fill().map((v, i) => (page * 100) + i)])\n    console.log('--- Fake loading finished ---')\n    if (observer == null) {\n      console.log('Observer not initialised')\n      observer = new IntersectionObserver(entities => {\n        console.log()\n      })\n    }\n  }, [page])\n\n  return (\n    <div class=\"bg-main py-12 md:py-20 text-white min-h-screen\">\n      <div class=\"mx-2 sm:mx-4 md:mx-8 lg:mx-16 xl:mx-30 2xl:mx-40\">\n        {\n          itemList.map((v, i) => (\n            <p class=\"text-xl\" key={i}>{v}</p>\n          ))\n        }\n        {loading ? <p class=\"text-xl\" ref={loader}>Loading ...</p> : null}\n      </div>\n    </div>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}