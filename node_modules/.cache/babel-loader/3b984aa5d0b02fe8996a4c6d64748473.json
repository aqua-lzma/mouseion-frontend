{"ast":null,"code":"var _jsxFileName = \"/home/aqua/Documents/Programming/mouseion-master/front-end/src/main-content.jsx\";\nimport { useState, useEffect, useRef } from 'react';\nimport firebase from 'firebase/app';\nimport 'firebase/firestore';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfirebase.initializeApp({\n  projectId: 'mouseion-tis-atmos'\n});\nconst firestore = firebase.firestore();\nexport default function () {\n  const [itemList, setItemList] = useState([]);\n  const [page, setPage] = useState(0);\n  const loader = useRef(); // Element initialised\n\n  useEffect(() => {\n    const observer = new IntersectionObserver(async entities => {\n      console.log(entities);\n      console.log('Observer handler called. Intersecting:', entities[0].isIntersecting);\n    });\n    observer.observe(loader.current);\n  }, []);\n  useEffect(async () => {\n    if (loading) {\n      console.log('Already loading. Going back');\n      return;\n    }\n\n    console.log('Page changed ->', page);\n    console.log('--- Starting fake loading ---');\n    await new Promise((res, rej) => {\n      setTimeout(res, 3000);\n    });\n    console.log('--- Fake loading finished ---');\n    setItemList([...itemList, ...Array(100).fill().map((v, i) => page * 100 + i)]);\n    console.log('Updated item list');\n  }, [page]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-main py-12 md:py-20 text-white min-h-screen\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mx-2 sm:mx-4 md:mx-8 lg:mx-16 xl:mx-30 2xl:mx-40\",\n      children: [itemList.map((v, i) => /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-xl\",\n        children: v\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 13\n      }, this)), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-xl\",\n        ref: loader,\n        children: \"Loading ...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 5\n  }, this);\n}","map":{"version":3,"sources":["/home/aqua/Documents/Programming/mouseion-master/front-end/src/main-content.jsx"],"names":["useState","useEffect","useRef","firebase","initializeApp","projectId","firestore","itemList","setItemList","page","setPage","loader","observer","IntersectionObserver","entities","console","log","isIntersecting","observe","current","loading","Promise","res","rej","setTimeout","Array","fill","map","v","i"],"mappings":";AAAA,SAASA,QAAT,EAAmBC,SAAnB,EAA8BC,MAA9B,QAA4C,OAA5C;AAEA,OAAOC,QAAP,MAAqB,cAArB;AACA,OAAO,oBAAP;;AAEAA,QAAQ,CAACC,aAAT,CAAuB;AACrBC,EAAAA,SAAS,EAAE;AADU,CAAvB;AAIA,MAAMC,SAAS,GAAGH,QAAQ,CAACG,SAAT,EAAlB;AAEA,eAAe,YAAY;AACzB,QAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BR,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAM,CAACS,IAAD,EAAOC,OAAP,IAAkBV,QAAQ,CAAC,CAAD,CAAhC;AACA,QAAMW,MAAM,GAAGT,MAAM,EAArB,CAHyB,CAKzB;;AACAD,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMW,QAAQ,GAAG,IAAIC,oBAAJ,CAAyB,MAAMC,QAAN,IAAkB;AAC1DC,MAAAA,OAAO,CAACC,GAAR,CAAYF,QAAZ;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAY,wCAAZ,EAAsDF,QAAQ,CAAC,CAAD,CAAR,CAAYG,cAAlE;AACD,KAHgB,CAAjB;AAIAL,IAAAA,QAAQ,CAACM,OAAT,CAAiBP,MAAM,CAACQ,OAAxB;AACD,GANQ,EAMN,EANM,CAAT;AAQAlB,EAAAA,SAAS,CAAC,YAAY;AACpB,QAAImB,OAAJ,EAAa;AACXL,MAAAA,OAAO,CAACC,GAAR,CAAY,6BAAZ;AACA;AACD;;AACDD,IAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA+BP,IAA/B;AACAM,IAAAA,OAAO,CAACC,GAAR,CAAY,+BAAZ;AACA,UAAM,IAAIK,OAAJ,CAAY,CAACC,GAAD,EAAMC,GAAN,KAAc;AAC9BC,MAAAA,UAAU,CAACF,GAAD,EAAM,IAAN,CAAV;AACD,KAFK,CAAN;AAGAP,IAAAA,OAAO,CAACC,GAAR,CAAY,+BAAZ;AACAR,IAAAA,WAAW,CAAC,CAAC,GAAGD,QAAJ,EAAc,GAAGkB,KAAK,CAAC,GAAD,CAAL,CAAWC,IAAX,GAAkBC,GAAlB,CAAsB,CAACC,CAAD,EAAIC,CAAJ,KAAWpB,IAAI,GAAG,GAAR,GAAeoB,CAA/C,CAAjB,CAAD,CAAX;AACAd,IAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ;AACD,GAbQ,EAaN,CAACP,IAAD,CAbM,CAAT;AAeA,sBACE;AAAK,IAAA,SAAS,EAAC,gDAAf;AAAA,2BACE;AAAK,MAAA,SAAS,EAAC,kDAAf;AAAA,iBAEIF,QAAQ,CAACoB,GAAT,CAAa,CAACC,CAAD,EAAIC,CAAJ,kBACX;AAAG,QAAA,SAAS,EAAC,SAAb;AAAA,kBAAgCD;AAAhC,SAA4BC,CAA5B;AAAA;AAAA;AAAA;AAAA,cADF,CAFJ,eAME;AAAG,QAAA,SAAS,EAAC,SAAb;AAAuB,QAAA,GAAG,EAAElB,MAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cANF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,UADF;AAYD","sourcesContent":["import { useState, useEffect, useRef } from 'react'\n\nimport firebase from 'firebase/app'\nimport 'firebase/firestore'\n\nfirebase.initializeApp({\n  projectId: 'mouseion-tis-atmos'\n})\n\nconst firestore = firebase.firestore()\n\nexport default function () {\n  const [itemList, setItemList] = useState([])\n  const [page, setPage] = useState(0)\n  const loader = useRef()\n\n  // Element initialised\n  useEffect(() => {\n    const observer = new IntersectionObserver(async entities => {\n      console.log(entities)\n      console.log('Observer handler called. Intersecting:', entities[0].isIntersecting)\n    })\n    observer.observe(loader.current)\n  }, [])\n\n  useEffect(async () => {\n    if (loading) {\n      console.log('Already loading. Going back')\n      return\n    }\n    console.log('Page changed ->', page)\n    console.log('--- Starting fake loading ---')\n    await new Promise((res, rej) => {\n      setTimeout(res, 3000)\n    })\n    console.log('--- Fake loading finished ---')\n    setItemList([...itemList, ...Array(100).fill().map((v, i) => (page * 100) + i)])\n    console.log('Updated item list')\n  }, [page])\n\n  return (\n    <div className=\"bg-main py-12 md:py-20 text-white min-h-screen\">\n      <div className=\"mx-2 sm:mx-4 md:mx-8 lg:mx-16 xl:mx-30 2xl:mx-40\">\n        {\n          itemList.map((v, i) => (\n            <p className=\"text-xl\" key={i}>{v}</p>\n          ))\n        }\n        <p className=\"text-xl\" ref={loader}>Loading ...</p>\n      </div>\n    </div>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}