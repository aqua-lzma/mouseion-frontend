{"ast":null,"code":"var _jsxFileName = \"/home/aqua/Documents/Programming/mouseion-master/front-end/src/main-content.jsx\";\nimport { useState, useEffect, useRef } from 'react';\nimport firebase from 'firebase/app';\nimport 'firebase/firestore';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfirebase.initializeApp({\n  projectId: 'mouseion-tis-atmos'\n});\nconst firestore = firebase.firestore();\nexport default function () {\n  const [itemList, setItemList] = useState([]);\n  const [page, setPage] = useState(0);\n  const [loading, setLoading] = useState(true);\n  const loader = useRef();\n  let observer; // Element initialised\n\n  useEffect(() => {\n    const observer = new IntersectionObserver(async entities => {\n      console.log('Observer handler called. Intersecting:', entities[0].isIntersecting);\n    });\n    observer.observe(loader.current);\n  }, []);\n  useEffect(async () => {\n    if (loading) {\n      console.log('Already loading. Going back');\n    }\n\n    setLoading(true);\n    console.log('Page changed ->', page);\n    console.log('--- Starting fake loading ---');\n    await new Promise((res, rej) => {\n      setTimeout(res, 3000);\n    });\n    setItemList([...itemList, ...Array(100).fill().map((v, i) => page * 100 + i)]);\n    console.log('--- Fake loading finished ---');\n  }, [page]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-main py-12 md:py-20 text-white min-h-screen\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mx-2 sm:mx-4 md:mx-8 lg:mx-16 xl:mx-30 2xl:mx-40\",\n      children: [itemList.map((v, i) => /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-xl\",\n        children: v\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 13\n      }, this)), loading ? /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-xl\",\n        ref: loader,\n        children: \"Loading ...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 20\n      }, this) : null]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 5\n  }, this);\n}","map":{"version":3,"sources":["/home/aqua/Documents/Programming/mouseion-master/front-end/src/main-content.jsx"],"names":["useState","useEffect","useRef","firebase","initializeApp","projectId","firestore","itemList","setItemList","page","setPage","loading","setLoading","loader","observer","IntersectionObserver","entities","console","log","isIntersecting","observe","current","Promise","res","rej","setTimeout","Array","fill","map","v","i"],"mappings":";AAAA,SAASA,QAAT,EAAmBC,SAAnB,EAA8BC,MAA9B,QAA4C,OAA5C;AAEA,OAAOC,QAAP,MAAqB,cAArB;AACA,OAAO,oBAAP;;AAEAA,QAAQ,CAACC,aAAT,CAAuB;AACrBC,EAAAA,SAAS,EAAE;AADU,CAAvB;AAIA,MAAMC,SAAS,GAAGH,QAAQ,CAACG,SAAT,EAAlB;AAEA,eAAe,YAAY;AACzB,QAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BR,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAM,CAACS,IAAD,EAAOC,OAAP,IAAkBV,QAAQ,CAAC,CAAD,CAAhC;AACA,QAAM,CAACW,OAAD,EAAUC,UAAV,IAAwBZ,QAAQ,CAAC,IAAD,CAAtC;AACA,QAAMa,MAAM,GAAGX,MAAM,EAArB;AACA,MAAIY,QAAJ,CALyB,CAOzB;;AACAb,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMa,QAAQ,GAAG,IAAIC,oBAAJ,CAAyB,MAAMC,QAAN,IAAkB;AAC1DC,MAAAA,OAAO,CAACC,GAAR,CAAY,wCAAZ,EAAsDF,QAAQ,CAAC,CAAD,CAAR,CAAYG,cAAlE;AACD,KAFgB,CAAjB;AAGAL,IAAAA,QAAQ,CAACM,OAAT,CAAiBP,MAAM,CAACQ,OAAxB;AACD,GALQ,EAKN,EALM,CAAT;AAOApB,EAAAA,SAAS,CAAC,YAAY;AACpB,QAAIU,OAAJ,EAAa;AACXM,MAAAA,OAAO,CAACC,GAAR,CAAY,6BAAZ;AACD;;AACDN,IAAAA,UAAU,CAAC,IAAD,CAAV;AACAK,IAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA+BT,IAA/B;AACAQ,IAAAA,OAAO,CAACC,GAAR,CAAY,+BAAZ;AACA,UAAM,IAAII,OAAJ,CAAY,CAACC,GAAD,EAAMC,GAAN,KAAc;AAC9BC,MAAAA,UAAU,CAACF,GAAD,EAAM,IAAN,CAAV;AACD,KAFK,CAAN;AAGAf,IAAAA,WAAW,CAAC,CAAC,GAAGD,QAAJ,EAAc,GAAGmB,KAAK,CAAC,GAAD,CAAL,CAAWC,IAAX,GAAkBC,GAAlB,CAAsB,CAACC,CAAD,EAAIC,CAAJ,KAAWrB,IAAI,GAAG,GAAR,GAAeqB,CAA/C,CAAjB,CAAD,CAAX;AACAb,IAAAA,OAAO,CAACC,GAAR,CAAY,+BAAZ;AACD,GAZQ,EAYN,CAACT,IAAD,CAZM,CAAT;AAcA,sBACE;AAAK,IAAA,SAAS,EAAC,gDAAf;AAAA,2BACE;AAAK,MAAA,SAAS,EAAC,kDAAf;AAAA,iBAEIF,QAAQ,CAACqB,GAAT,CAAa,CAACC,CAAD,EAAIC,CAAJ,kBACX;AAAG,QAAA,SAAS,EAAC,SAAb;AAAA,kBAAgCD;AAAhC,SAA4BC,CAA5B;AAAA;AAAA;AAAA;AAAA,cADF,CAFJ,EAMGnB,OAAO,gBAAG;AAAG,QAAA,SAAS,EAAC,SAAb;AAAuB,QAAA,GAAG,EAAEE,MAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAAH,GAAyD,IANnE;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,UADF;AAYD","sourcesContent":["import { useState, useEffect, useRef } from 'react'\n\nimport firebase from 'firebase/app'\nimport 'firebase/firestore'\n\nfirebase.initializeApp({\n  projectId: 'mouseion-tis-atmos'\n})\n\nconst firestore = firebase.firestore()\n\nexport default function () {\n  const [itemList, setItemList] = useState([])\n  const [page, setPage] = useState(0)\n  const [loading, setLoading] = useState(true)\n  const loader = useRef()\n  let observer\n\n  // Element initialised\n  useEffect(() => {\n    const observer = new IntersectionObserver(async entities => {\n      console.log('Observer handler called. Intersecting:', entities[0].isIntersecting)\n    })\n    observer.observe(loader.current)\n  }, [])\n\n  useEffect(async () => {\n    if (loading) {\n      console.log('Already loading. Going back')\n    }\n    setLoading(true)\n    console.log('Page changed ->', page)\n    console.log('--- Starting fake loading ---')\n    await new Promise((res, rej) => {\n      setTimeout(res, 3000)\n    })\n    setItemList([...itemList, ...Array(100).fill().map((v, i) => (page * 100) + i)])\n    console.log('--- Fake loading finished ---')\n  }, [page])\n\n  return (\n    <div className=\"bg-main py-12 md:py-20 text-white min-h-screen\">\n      <div className=\"mx-2 sm:mx-4 md:mx-8 lg:mx-16 xl:mx-30 2xl:mx-40\">\n        {\n          itemList.map((v, i) => (\n            <p className=\"text-xl\" key={i}>{v}</p>\n          ))\n        }\n        {loading ? <p className=\"text-xl\" ref={loader}>Loading ...</p> : null}\n      </div>\n    </div>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}