{"ast":null,"code":"import _createForOfIteratorHelper from\"/home/aqua/Documents/Programming/mouseion-master/front-end/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";import _regeneratorRuntime from\"/home/aqua/Documents/Programming/mouseion-master/front-end/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/aqua/Documents/Programming/mouseion-master/front-end/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/aqua/Documents/Programming/mouseion-master/front-end/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/* eslint-env browser */import{useState,useEffect,useRef}from'react';import{Switch,Route,Link,useParams}from'react-router-dom';import{firebaseInstance,firestore}from'./firestore';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Thumbnail(props){var image=useRef();useEffect(function(){var observer=new IntersectionObserver(function(entities){if(entities[0].isIntersecting){if(props.image!=null){image.current.src=props.image;}else{image.current.src='https://picardia.co/static/papes/4b50dbaa-624e-11e7-b2fe-3a6e8f7c670f.jpg';}image.current.addEventListener('load',function(){image.current.style.opacity=1;});observer.disconnect();}});observer.observe(image.current);},[]);return/*#__PURE__*/_jsxs(Link,{className:\"m-2 transition bg-gray-800 bg-opacity-60 hover:filter brightness-150 p-2 hover:bg-gray-400 hover:text-gray-800\",to:props.to==null?'#':props.to,title:props.text,children:[/*#__PURE__*/_jsx(\"img\",{className:\"w-40 h-40 object-cover object-center opacity-0 transition-opacity delay-1000\",ref:image}),/*#__PURE__*/_jsx(\"p\",{className:\"w-40 text-xl text-center truncate\",children:props.text})]});}function Home(){return/*#__PURE__*/_jsx(\"h1\",{children:\"Home\"});}function Artists(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),list=_useState2[0],setList=_useState2[1];// const [page, setPage] = useState(0)\nuseEffect(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var query;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return firestore.collection('t2artists').orderBy('name').limit(100).get();case 2:query=_context.sent;setList(query.docs);case 4:case\"end\":return _context.stop();}}},_callee);})),[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl pb-4 border-b border-gray-600 border-opacity-70\",children:\"Artists\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap\",children:list.map(function(v,i){return/*#__PURE__*/_jsx(Thumbnail,{text:v.data().name,to:\"/artist/\".concat(v.id)},i);})})]});}function Artist(props){var _useParams=useParams(),id=_useParams.id;var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),name=_useState4[0],setName=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),list=_useState6[0],setList=_useState6[1];useEffect(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var docs,doc,albums,listData,_iterator,_step,_doc,album;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return firestore.collection('t2artists').where(firebaseInstance.firestore.FieldPath.documentId(),'==',id).get();case 2:docs=_context2.sent;if(!(docs.size===0)){_context2.next=7;break;}setName('Artist not found.');_context2.next=33;break;case 7:doc=docs.docs[0];setName(doc.get('name'));_context2.next=11;return firestore.collectionGroup('track-artists').where('ref','==',doc.ref).get();case 11:albums=_context2.sent;listData=[];_iterator=_createForOfIteratorHelper(albums.docs);_context2.prev=14;_iterator.s();case 16:if((_step=_iterator.n()).done){_context2.next=24;break;}_doc=_step.value;_context2.next=20;return _doc.ref.parent.parent.get();case 20:album=_context2.sent;listData.push(album);case 22:_context2.next=16;break;case 24:_context2.next=29;break;case 26:_context2.prev=26;_context2.t0=_context2[\"catch\"](14);_iterator.e(_context2.t0);case 29:_context2.prev=29;_iterator.f();return _context2.finish(29);case 32:setList(listData);case 33:case\"end\":return _context2.stop();}}},_callee2,null,[[14,26,29,32]]);})),[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl pb-4 border-b border-gray-600 border-opacity-70\",children:name}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap\",children:list.map(function(v,i){return/*#__PURE__*/_jsx(Thumbnail,{text:v.data().title,image:\"https://picardia.co/mouseion/images/\".concat(v.data().artwork[0])},i);})})]});}export default function MainContent(){return/*#__PURE__*/_jsx(\"div\",{className:\"bg-main py-16 lg:py-20 min-h-screen\",children:/*#__PURE__*/_jsx(\"div\",{className:\"mx-2 sm:mx-4 md:mx-8 lg:mx-16 xl:mx-30 2xl:mx-40 space-y-4\",children:/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{exact:true,path:\"/\",children:/*#__PURE__*/_jsx(Home,{})}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/labels\",children:/*#__PURE__*/_jsx(Home,{})}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/artists\",children:/*#__PURE__*/_jsx(Artists,{})}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/albums\",children:/*#__PURE__*/_jsx(Home,{})}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/songs\",children:/*#__PURE__*/_jsx(Home,{})}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/artist/:id\",children:/*#__PURE__*/_jsx(Artist,{})}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/album/:id\",children:/*#__PURE__*/_jsx(Home,{})}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/search\",children:/*#__PURE__*/_jsx(Home,{})}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/settings\",children:/*#__PURE__*/_jsx(Home,{})})]})})});}","map":{"version":3,"sources":["/home/aqua/Documents/Programming/mouseion-master/front-end/src/main-content.jsx"],"names":["useState","useEffect","useRef","Switch","Route","Link","useParams","firebaseInstance","firestore","Thumbnail","props","image","observer","IntersectionObserver","entities","isIntersecting","current","src","addEventListener","style","opacity","disconnect","observe","to","text","Home","Artists","list","setList","collection","orderBy","limit","get","query","docs","map","v","i","data","name","id","Artist","setName","where","FieldPath","documentId","size","doc","collectionGroup","ref","albums","listData","parent","album","push","title","artwork","MainContent"],"mappings":"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","sourcesContent":["/* eslint-env browser */\nimport { useState, useEffect, useRef } from 'react'\nimport { Switch, Route, Link, useParams } from 'react-router-dom'\n\nimport { firebaseInstance, firestore } from './firestore'\n\nfunction Thumbnail (props) {\n  const image = useRef()\n\n  useEffect(() => {\n    const observer = new IntersectionObserver((entities) => {\n      if (entities[0].isIntersecting) {\n        if (props.image != null) {\n          image.current.src = props.image\n        } else {\n          image.current.src = 'https://picardia.co/static/papes/4b50dbaa-624e-11e7-b2fe-3a6e8f7c670f.jpg'\n        }\n        image.current.addEventListener('load', () => {\n          image.current.style.opacity = 1\n        })\n        observer.disconnect()\n      }\n    })\n    observer.observe(image.current)\n  }, [])\n\n  return (\n    <Link\n      className='m-2 transition bg-gray-800 bg-opacity-60 hover:filter brightness-150 p-2 hover:bg-gray-400 hover:text-gray-800'\n      to={props.to == null ? '#' : props.to}\n      title={props.text}\n    >\n      <img className='w-40 h-40 object-cover object-center opacity-0 transition-opacity delay-1000' ref={image} />\n      <p className='w-40 text-xl text-center truncate'>{props.text}</p>\n    </Link>\n  )\n}\n\nfunction Home () {\n  return <h1>Home</h1>\n}\n\nfunction Artists () {\n  const [list, setList] = useState([])\n  // const [page, setPage] = useState(0)\n\n  useEffect(async () => {\n    const query = await firestore.collection('t2artists').orderBy('name').limit(100).get()\n    setList(query.docs)\n  }, [])\n\n  return (\n    <>\n      <h1 className='text-3xl pb-4 border-b border-gray-600 border-opacity-70'>Artists</h1>\n      <div className='flex flex-wrap'>\n        {list.map((v, i) => {\n          return <Thumbnail key={i} text={v.data().name} to={`/artist/${v.id}`} />\n        })}\n      </div>\n    </>\n  )\n}\n\nfunction Artist (props) {\n  const { id } = useParams()\n  const [name, setName] = useState('')\n  const [list, setList] = useState([])\n\n  useEffect(async () => {\n    const docs = await firestore.collection('t2artists').where(firebaseInstance.firestore.FieldPath.documentId(), '==', id).get()\n    if (docs.size === 0) {\n      setName('Artist not found.')\n    } else {\n      const doc = docs.docs[0]\n      setName(doc.get('name'))\n      const albums = await firestore.collectionGroup('track-artists').where('ref', '==', doc.ref).get()\n      const listData = []\n      for (const doc of albums.docs) {\n        const album = await doc.ref.parent.parent.get()\n        listData.push(album)\n      }\n      setList(listData)\n    }\n  }, [])\n\n  return (\n    <>\n      <h1 className='text-3xl pb-4 border-b border-gray-600 border-opacity-70'>{name}</h1>\n      <div className='flex flex-wrap'>\n        {list.map((v, i) => {\n          return <Thumbnail key={i} text={v.data().title} image={`https://picardia.co/mouseion/images/${v.data().artwork[0]}`} />\n        })}\n      </div>\n    </>\n  )\n}\n\nexport default function MainContent () {\n  return (\n    <div className='bg-main py-16 lg:py-20 min-h-screen'>\n      <div className='mx-2 sm:mx-4 md:mx-8 lg:mx-16 xl:mx-30 2xl:mx-40 space-y-4'>\n        <Switch>\n          <Route exact path='/'>\n            <Home />\n          </Route>\n          <Route exact path='/labels'>\n            <Home />\n          </Route>\n          <Route exact path='/artists'>\n            <Artists />\n          </Route>\n          <Route exact path='/albums'>\n            <Home />\n          </Route>\n          <Route exact path='/songs'>\n            <Home />\n          </Route>\n          <Route exact path='/artist/:id'>\n            <Artist />\n          </Route>\n          <Route exact path='/album/:id'>\n            <Home />\n          </Route>\n          <Route exact path='/search'>\n            <Home />\n          </Route>\n          <Route exact path='/settings'>\n            <Home />\n          </Route>\n        </Switch>\n      </div>\n    </div>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}